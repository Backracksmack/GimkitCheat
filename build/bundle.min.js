!function(){"use strict";function e(e,t){return e[t.offset++]}function t(e,t){return e[t.offset++]|e[t.offset++]<<8}function i(e,t){return e[t.offset++]|e[t.offset++]<<8|e[t.offset++]<<16|e[t.offset++]<<24}function n(e,t){return i(e,t)>>>0}const s=new Int32Array(2),r=new Float32Array(s.buffer),o=new Float64Array(s.buffer);function a(i,s){const r=i[s.offset++];let o;r<192?o=31&r:217===r?o=e(i,s):218===r?o=t(i,s):219===r&&(o=n(i,s));const a=function(e,t,i){for(var n="",s=0,r=t,o=t+i;r<o;r++){var a=e[r];0!=(128&a)?192!=(224&a)?224!=(240&a)?240!=(248&a)?console.error("Invalid byte "+a.toString(16)):(s=(7&a)<<18|(63&e[++r])<<12|(63&e[++r])<<6|(63&e[++r])<<0)>=65536?(s-=65536,n+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):n+=String.fromCharCode(s):n+=String.fromCharCode((15&a)<<12|(63&e[++r])<<6|(63&e[++r])<<0):n+=String.fromCharCode((31&a)<<6|63&e[++r]):n+=String.fromCharCode(a)}return n}(i,s.offset,o);return s.offset+=o,a}function l(a,l){const h=a[l.offset++];return h<128?h:202===h?function(e,t){return s[0]=i(e,t),r[0]}(a,l):203===h?function(e,t){return s[0]=i(e,t),s[1]=i(e,t),o[0]}(a,l):204===h?e(a,l):205===h?t(a,l):206===h?n(a,l):207===h?function(e,t){const i=n(e,t);return n(e,t)*Math.pow(2,32)+i}(a,l):208===h?function(t,i){return e(t,i)<<24>>24}(a,l):209===h?function(e,i){return t(e,i)<<16>>16}(a,l):210===h?i(a,l):211===h?function(e,t){const s=n(e,t);return i(e,t)*Math.pow(2,32)+s}(a,l):h>223?-1*(255-h+1):void 0}const h=13;function d(e,t){if(this._offset=t,e instanceof ArrayBuffer)this._buffer=e,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(e))throw new Error("Invalid argument");this._buffer=e.buffer,this._view=new DataView(this._buffer,e.byteOffset,e.byteLength)}}function u(e,t,i){for(var n=0,s=0,r=i.length;s<r;s++)(n=i.charCodeAt(s))<128?e.setUint8(t++,n):n<2048?(e.setUint8(t++,192|n>>6),e.setUint8(t++,128|63&n)):n<55296||n>=57344?(e.setUint8(t++,224|n>>12),e.setUint8(t++,128|n>>6&63),e.setUint8(t++,128|63&n)):(s++,n=65536+((1023&n)<<10|1023&i.charCodeAt(s)),e.setUint8(t++,240|n>>18),e.setUint8(t++,128|n>>12&63),e.setUint8(t++,128|n>>6&63),e.setUint8(t++,128|63&n))}function c(e,t,i){var n=typeof i,s=0,r=0,o=0,a=0,l=0,h=0;if("string"===n){if(l=function(e){for(var t=0,i=0,n=0,s=e.length;n<s;n++)(t=e.charCodeAt(n))<128?i+=1:t<2048?i+=2:t<55296||t>=57344?i+=3:(n++,i+=4);return i}(i),l<32)e.push(160|l),h=1;else if(l<256)e.push(217,l),h=2;else if(l<65536)e.push(218,l>>8,l),h=3;else{if(!(l<4294967296))throw new Error("String too long");e.push(219,l>>24,l>>16,l>>8,l),h=5}return t.push({_str:i,_length:l,_offset:e.length}),h+l}if("number"===n)return Math.floor(i)===i&&isFinite(i)?i>=0?i<128?(e.push(i),1):i<256?(e.push(204,i),2):i<65536?(e.push(205,i>>8,i),3):i<4294967296?(e.push(206,i>>24,i>>16,i>>8,i),5):(o=i/Math.pow(2,32)>>0,a=i>>>0,e.push(207,o>>24,o>>16,o>>8,o,a>>24,a>>16,a>>8,a),9):i>=-32?(e.push(i),1):i>=-128?(e.push(208,i),2):i>=-32768?(e.push(209,i>>8,i),3):i>=-2147483648?(e.push(210,i>>24,i>>16,i>>8,i),5):(o=Math.floor(i/Math.pow(2,32)),a=i>>>0,e.push(211,o>>24,o>>16,o>>8,o,a>>24,a>>16,a>>8,a),9):(e.push(203),t.push({_float:i,_length:8,_offset:e.length}),9);if("object"===n){if(null===i)return e.push(192),1;if(Array.isArray(i)){if((l=i.length)<16)e.push(144|l),h=1;else if(l<65536)e.push(220,l>>8,l),h=3;else{if(!(l<4294967296))throw new Error("Array too large");e.push(221,l>>24,l>>16,l>>8,l),h=5}for(s=0;s<l;s++)h+=c(e,t,i[s]);return h}if(i instanceof Date){var d=i.getTime();return o=Math.floor(d/Math.pow(2,32)),a=d>>>0,e.push(215,0,o>>24,o>>16,o>>8,o,a>>24,a>>16,a>>8,a),10}if(i instanceof ArrayBuffer){if((l=i.byteLength)<256)e.push(196,l),h=2;else if(l<65536)e.push(197,l>>8,l),h=3;else{if(!(l<4294967296))throw new Error("Buffer too large");e.push(198,l>>24,l>>16,l>>8,l),h=5}return t.push({_bin:i,_length:l,_offset:e.length}),h+l}if("function"==typeof i.toJSON)return c(e,t,i.toJSON());var u=[],p="",f=Object.keys(i);for(s=0,r=f.length;s<r;s++)"function"!=typeof i[p=f[s]]&&u.push(p);if((l=u.length)<16)e.push(128|l),h=1;else if(l<65536)e.push(222,l>>8,l),h=3;else{if(!(l<4294967296))throw new Error("Object too large");e.push(223,l>>24,l>>16,l>>8,l),h=5}for(s=0;s<l;s++)h+=c(e,t,p=u[s]),h+=c(e,t,i[p]);return h}if("boolean"===n)return e.push(i?195:194),1;if("undefined"===n)return e.push(212,0,0),3;throw new Error("Could not encode")}function p(e){var t=[],i=[],n=c(t,i,e),s=new ArrayBuffer(n),r=new DataView(s),o=0,a=0,l=-1;i.length>0&&(l=i[0]._offset);for(var h,d=0,p=0,f=0,g=t.length;f<g;f++)if(r.setUint8(a+f,t[f]),f+1===l){if(d=(h=i[o])._length,p=a+l,h._bin)for(var m=new Uint8Array(h._bin),v=0;v<d;v++)r.setUint8(p+v,m[v]);else h._str?u(r,p,h._str):void 0!==h._float&&r.setFloat64(p,h._float);a+=d,i[++o]&&(l=i[o]._offset)}return s}d.prototype._array=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=this._parse();return t},d.prototype._map=function(e){for(var t={},i=0;i<e;i++)t[this._parse()]=this._parse();return t},d.prototype._str=function(e){var t=function(e,t,i){for(var n="",s=0,r=t,o=t+i;r<o;r++){var a=e.getUint8(r);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(s=(7&a)<<18|(63&e.getUint8(++r))<<12|(63&e.getUint8(++r))<<6|(63&e.getUint8(++r))<<0)>=65536?(s-=65536,n+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):n+=String.fromCharCode(s)}else n+=String.fromCharCode((15&a)<<12|(63&e.getUint8(++r))<<6|(63&e.getUint8(++r))<<0);else n+=String.fromCharCode((31&a)<<6|63&e.getUint8(++r));else n+=String.fromCharCode(a)}return n}(this._view,this._offset,e);return this._offset+=e,t},d.prototype._bin=function(e){var t=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,t},d.prototype._parse=function(){var e,t=this._view.getUint8(this._offset++),i=0,n=0,s=0,r=0;if(t<192)return t<128?t:t<144?this._map(15&t):t<160?this._array(15&t):this._str(31&t);if(t>223)return-1*(255-t+1);switch(t){case 192:return null;case 194:return!1;case 195:return!0;case 196:return i=this._view.getUint8(this._offset),this._offset+=1,this._bin(i);case 197:return i=this._view.getUint16(this._offset),this._offset+=2,this._bin(i);case 198:return i=this._view.getUint32(this._offset),this._offset+=4,this._bin(i);case 199:return i=this._view.getUint8(this._offset),n=this._view.getInt8(this._offset+1),this._offset+=2,[n,this._bin(i)];case 200:return i=this._view.getUint16(this._offset),n=this._view.getInt8(this._offset+2),this._offset+=3,[n,this._bin(i)];case 201:return i=this._view.getUint32(this._offset),n=this._view.getInt8(this._offset+4),this._offset+=5,[n,this._bin(i)];case 202:return e=this._view.getFloat32(this._offset),this._offset+=4,e;case 203:return e=this._view.getFloat64(this._offset),this._offset+=8,e;case 204:return e=this._view.getUint8(this._offset),this._offset+=1,e;case 205:return e=this._view.getUint16(this._offset),this._offset+=2,e;case 206:return e=this._view.getUint32(this._offset),this._offset+=4,e;case 207:return s=this._view.getUint32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,s+r;case 208:return e=this._view.getInt8(this._offset),this._offset+=1,e;case 209:return e=this._view.getInt16(this._offset),this._offset+=2,e;case 210:return e=this._view.getInt32(this._offset),this._offset+=4,e;case 211:return s=this._view.getInt32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,s+r;case 212:return n=this._view.getInt8(this._offset),this._offset+=1,0===n?void(this._offset+=1):[n,this._bin(1)];case 213:return n=this._view.getInt8(this._offset),this._offset+=1,[n,this._bin(2)];case 214:return n=this._view.getInt8(this._offset),this._offset+=1,[n,this._bin(4)];case 215:return n=this._view.getInt8(this._offset),this._offset+=1,0===n?(s=this._view.getInt32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,new Date(s+r)):[n,this._bin(8)];case 216:return n=this._view.getInt8(this._offset),this._offset+=1,[n,this._bin(16)];case 217:return i=this._view.getUint8(this._offset),this._offset+=1,this._str(i);case 218:return i=this._view.getUint16(this._offset),this._offset+=2,this._str(i);case 219:return i=this._view.getUint32(this._offset),this._offset+=4,this._str(i);case 220:return i=this._view.getUint16(this._offset),this._offset+=2,this._array(i);case 221:return i=this._view.getUint32(this._offset),this._offset+=4,this._array(i);case 222:return i=this._view.getUint16(this._offset),this._offset+=2,this._map(i);case 223:return i=this._view.getUint32(this._offset),this._offset+=4,this._map(i)}throw new Error("Could not parse")};var f={decode:function(e){const t=new Uint8Array(e),i=Array.from(t);if(i[0]==h){let t={offset:1};return!function(e,t){const i=e[t.offset];return i<192&&i>160||217===i||218===i||219===i}(i,t)?l(i,t):a(i,t),function(e,t){void 0===t&&(t=0);var i=new d(e,t),n=i._parse();if(i._offset!==e.byteLength)throw new Error(e.byteLength-i._offset+" trailing bytes");return n}(e,t.offset)}return null},encode:function(e,t){let i=[h],n=p(e),s=p(t),r=new Uint8Array(n.byteLength+s.byteLength+i.length);return r.set(i),r.set(new Uint8Array(n),i.length),r.set(new Uint8Array(s),i.length+n.byteLength),r.buffer}};function g(e,t,i){for(var n=0,s=0,r=i.length;s<r;s++)(n=i.charCodeAt(s))<128?e.setUint8(t++,n):(n<2048?e.setUint8(t++,192|n>>6):(n<55296||57344<=n?e.setUint8(t++,224|n>>12):(s++,n=65536+((1023&n)<<10|1023&i.charCodeAt(s)),e.setUint8(t++,240|n>>18),e.setUint8(t++,128|n>>12&63)),e.setUint8(t++,128|n>>6&63)),e.setUint8(t++,128|63&n))}var m={encode:function(e,t,i){return function(e){var t=[],i=[],n=function e(t,i,n){var s=typeof n,r=0,o=0,a=0,l=0,h=0,d=0;if("string"===s){if((h=function(e){for(var t=0,i=0,n=0,s=e.length;n<s;n++)(t=e.charCodeAt(n))<128?i+=1:t<2048?i+=2:t<55296||57344<=t?i+=3:(n++,i+=4);return i}(n))<32)t.push(160|h),d=1;else if(h<256)t.push(217,h),d=2;else if(h<65536)t.push(218,h>>8,h),d=3;else{if(!(h<4294967296))throw new Error("String too long");t.push(219,h>>24,h>>16,h>>8,h),d=5}return i.push({h:n,u:h,t:t.length}),d+h}if("number"===s)return Math.floor(n)===n&&isFinite(n)?0<=n?n<128?(t.push(n),1):n<256?(t.push(204,n),2):n<65536?(t.push(205,n>>8,n),3):n<4294967296?(t.push(206,n>>24,n>>16,n>>8,n),5):(a=n/Math.pow(2,32)>>0,l=n>>>0,t.push(207,a>>24,a>>16,a>>8,a,l>>24,l>>16,l>>8,l),9):-32<=n?(t.push(n),1):-128<=n?(t.push(208,n),2):-32768<=n?(t.push(209,n>>8,n),3):-2147483648<=n?(t.push(210,n>>24,n>>16,n>>8,n),5):(a=Math.floor(n/Math.pow(2,32)),l=n>>>0,t.push(211,a>>24,a>>16,a>>8,a,l>>24,l>>16,l>>8,l),9):(t.push(203),i.push({o:n,u:8,t:t.length}),9);if("object"===s){if(null===n)return t.push(192),1;if(Array.isArray(n)){if((h=n.length)<16)t.push(144|h),d=1;else if(h<65536)t.push(220,h>>8,h),d=3;else{if(!(h<4294967296))throw new Error("Array too large");t.push(221,h>>24,h>>16,h>>8,h),d=5}for(r=0;r<h;r++)d+=e(t,i,n[r]);return d}if(n instanceof Date){var u=n.getTime();return a=Math.floor(u/Math.pow(2,32)),l=u>>>0,t.push(215,0,a>>24,a>>16,a>>8,a,l>>24,l>>16,l>>8,l),10}if(n instanceof ArrayBuffer){if((h=n.byteLength)<256)t.push(196,h),d=2;else if(h<65536)t.push(197,h>>8,h),d=3;else{if(!(h<4294967296))throw new Error("Buffer too large");t.push(198,h>>24,h>>16,h>>8,h),d=5}return i.push({l:n,u:h,t:t.length}),d+h}if("function"==typeof n.toJSON)return e(t,i,n.toJSON());var c=[],p="",f=Object.keys(n);for(r=0,o=f.length;r<o;r++)"function"!=typeof n[p=f[r]]&&c.push(p);if((h=c.length)<16)t.push(128|h),d=1;else if(h<65536)t.push(222,h>>8,h),d=3;else{if(!(h<4294967296))throw new Error("Object too large");t.push(223,h>>24,h>>16,h>>8,h),d=5}for(r=0;r<h;r++)d+=e(t,i,p=c[r]),d+=e(t,i,n[p]);return d}if("boolean"===s)return t.push(n?195:194),1;if("undefined"===s)return t.push(212,0,0),3;throw new Error("Could not encode")}(t,i,e),s=new ArrayBuffer(n),r=new DataView(s),o=0,a=0,l=-1;0<i.length&&(l=i[0].t);for(var h,d=0,u=0,c=0,p=t.length;c<p;c++)if(r.setUint8(a+c,t[c]),c+1===l){if(d=(h=i[o]).u,u=a+l,h.l)for(var f=new Uint8Array(h.l),m=0;m<d;m++)r.setUint8(u+m,f[m]);else h.h?g(r,u,h.h):void 0!==h.o&&r.setFloat64(u,h.o);a+=d,i[++o]&&(l=i[o].t)}let v=Array.from(new Uint8Array(s));return v.unshift(4),new Uint8Array(v).buffer}({type:2,data:["blueboat_SEND_MESSAGE",{room:i,key:e,data:t}],options:{compress:!0},nsp:"/"})},decode:function(e){function t(e){if(this.t=0,e instanceof ArrayBuffer)this.i=e,this.s=new DataView(this.i);else{if(!ArrayBuffer.isView(e))return null;this.i=e.buffer,this.s=new DataView(this.i,e.byteOffset,e.byteLength)}}t.prototype.g=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=this.v();return t},t.prototype.M=function(e){for(var t={},i=0;i<e;i++)t[this.v()]=this.v();return t},t.prototype.h=function(e){var t=function(e,t,i){for(var n="",s=0,r=t,o=t+i;r<o;r++){var a=e.getUint8(r);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));65536<=(s=(7&a)<<18|(63&e.getUint8(++r))<<12|(63&e.getUint8(++r))<<6|(63&e.getUint8(++r))<<0)?(s-=65536,n+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):n+=String.fromCharCode(s)}else n+=String.fromCharCode((15&a)<<12|(63&e.getUint8(++r))<<6|(63&e.getUint8(++r))<<0);else n+=String.fromCharCode((31&a)<<6|63&e.getUint8(++r));else n+=String.fromCharCode(a)}return n}(this.s,this.t,e);return this.t+=e,t},t.prototype.l=function(e){var t=this.i.slice(this.t,this.t+e);return this.t+=e,t},t.prototype.v=function(){if(!this.s)return null;var e,t=this.s.getUint8(this.t++),i=0,n=0,s=0,r=0;if(t<192)return t<128?t:t<144?this.M(15&t):t<160?this.g(15&t):this.h(31&t);if(223<t)return-1*(255-t+1);switch(t){case 192:return null;case 194:return!1;case 195:return!0;case 196:return i=this.s.getUint8(this.t),this.t+=1,this.l(i);case 197:return i=this.s.getUint16(this.t),this.t+=2,this.l(i);case 198:return i=this.s.getUint32(this.t),this.t+=4,this.l(i);case 199:return i=this.s.getUint8(this.t),n=this.s.getInt8(this.t+1),this.t+=2,[n,this.l(i)];case 200:return i=this.s.getUint16(this.t),n=this.s.getInt8(this.t+2),this.t+=3,[n,this.l(i)];case 201:return i=this.s.getUint32(this.t),n=this.s.getInt8(this.t+4),this.t+=5,[n,this.l(i)];case 202:return e=this.s.getFloat32(this.t),this.t+=4,e;case 203:return e=this.s.getFloat64(this.t),this.t+=8,e;case 204:return e=this.s.getUint8(this.t),this.t+=1,e;case 205:return e=this.s.getUint16(this.t),this.t+=2,e;case 206:return e=this.s.getUint32(this.t),this.t+=4,e;case 207:return s=this.s.getUint32(this.t)*Math.pow(2,32),r=this.s.getUint32(this.t+4),this.t+=8,s+r;case 208:return e=this.s.getInt8(this.t),this.t+=1,e;case 209:return e=this.s.getInt16(this.t),this.t+=2,e;case 210:return e=this.s.getInt32(this.t),this.t+=4,e;case 211:return s=this.s.getInt32(this.t)*Math.pow(2,32),r=this.s.getUint32(this.t+4),this.t+=8,s+r;case 212:return n=this.s.getInt8(this.t),this.t+=1,0===n?void(this.t+=1):[n,this.l(1)];case 213:return n=this.s.getInt8(this.t),this.t+=1,[n,this.l(2)];case 214:return n=this.s.getInt8(this.t),this.t+=1,[n,this.l(4)];case 215:return n=this.s.getInt8(this.t),this.t+=1,0===n?(s=this.s.getInt32(this.t)*Math.pow(2,32),r=this.s.getUint32(this.t+4),this.t+=8,new Date(s+r)):[n,this.l(8)];case 216:return n=this.s.getInt8(this.t),this.t+=1,[n,this.l(16)];case 217:return i=this.s.getUint8(this.t),this.t+=1,this.h(i);case 218:return i=this.s.getUint16(this.t),this.t+=2,this.h(i);case 219:return i=this.s.getUint32(this.t),this.t+=4,this.h(i);case 220:return i=this.s.getUint16(this.t),this.t+=2,this.g(i);case 221:return i=this.s.getUint32(this.t),this.t+=4,this.g(i);case 222:return i=this.s.getUint16(this.t),this.t+=2,this.M(i);case 223:return i=this.s.getUint32(this.t),this.t+=4,this.M(i)}throw new Error("Could not parse")};const i=function(e){var i=new t(e=e.slice(1)),n=i.v();return i.t===e.byteLength?n:null}(e);return i?.data?.[1]}};class v extends EventTarget{constructor(e){super(),this.socket=null,this.hasFired=!1,this.transportType="unknown",this.blueboatRoomId=null,this.cheat=e}getSocket(){let e=this;if(Object.isFrozen(WebSocket)){let t=setInterval((()=>{var i,n,s,r,o;let a=null===(o=null===(r=null===(s=null===(n=null===(i=null===window||void 0===window?void 0:window.stores)||void 0===i?void 0:i.network)||void 0===n?void 0:n.room)||void 0===s?void 0:s.connection)||void 0===r?void 0:r.transport)||void 0===o?void 0:o.ws;a&&(e.registerSocket(a),clearInterval(t))}),100)}else WebSocket.prototype._send=WebSocket.prototype.send,WebSocket.prototype.send=function(t){if(e.registerSocket(this),e.socket&&(e.socket._send(t),"blueboat"==e.transportType)){let i=m.decode(t);i.roomId&&(e.blueboatRoomId=i.roomId),i.room&&(e.blueboatRoomId=i.room),e.blueboatRoomId||e.cheat.log("Room ID: ",e.blueboatRoomId)}}}registerSocket(e){if(this.hasFired)return;this.socket=e,this.hasFired=!0,this.dispatchEvent(new CustomEvent("socket",{detail:e})),"stores"in unsafeWindow?this.transportType="colyseus":this.transportType="blueboat";let t=this;e.addEventListener("message",(e=>{let i;i="colyseus"==this.transportType?f.decode(e.data):m.decode(e.data),i&&t.dispatchEvent(new CustomEvent("recieveMessage",{detail:i}))}))}sendData(e,t){if(!this.socket)return;if(!this.blueboatRoomId&&"blueboat"==this.transportType)return this.cheat.log("Room ID not found, can't send data");let i;i="colyseus"==this.transportType?f.encode(e,t):m.encode(e,t,this.blueboatRoomId),this.socket.send(i)}}class y{constructor(){this.keys=new Set,this.binds=[],this.addListeners()}addListeners(){window.addEventListener("keydown",(e=>{this.keys.add(e.key.toLowerCase()),this.checkBinds(e)})),window.addEventListener("keyup",(e=>{this.keys.delete(e.key.toLowerCase())})),window.addEventListener("blur",(()=>{this.keys.clear()}))}checkBinds(e){var t;if(!e.repeat)for(let i of this.binds)i.keys.has(e.key.toLowerCase())&&0!=i.keys.size&&(i.exclusive&&i.keys.size!=this.keys.size||Array.from(i.keys).every((e=>this.keys.has(e)))&&(null===(t=i.callback)||void 0===t||t.call(i)))}registerBind(e){this.binds.includes(e)||this.binds.push(e)}removeBind(e){this.binds.includes(e)&&this.binds.splice(this.binds.indexOf(e),1)}clearBinds(){this.binds=[]}}class b extends EventTarget{constructor(e,t){super(),this.group=null,this.options=null,this.element=null,this.group=e,this.options=t}remove(){var e;null===(e=this.element)||void 0===e||e.remove(),this.group.elements.splice(this.group.elements.indexOf(this),1)}}class w extends b{constructor(e,t){super(e,t),this.element=document.createElement("div"),this.element.classList.add("text"),this.element.innerText=this.options.text}set text(e){this.element.innerText=e}get text(){return this.element.innerText}}class k extends b{constructor(e,t){super(e,t),this.element=document.createElement("button"),this.element.classList.add("group_opener"),this.element.innerText=this.options.text,this.element.addEventListener("click",(()=>{var e;let t=null!==(e=this.options.direction)&&void 0!==e?e:"right",i="right"==t?"left":"right";this.group.slide("out",t);let n=this.group.menu.getAnyGroup(this.options.openGroup);n&&n.slide("in",i)}))}set text(e){this.element.innerText=e}get text(){return this.element.innerText}}class _ extends b{constructor(e,t){var i,n;super(e,t),this.opacitySlider=null,this.colorPicker=null,this.preview=null;let s=document.createElement("div");s.innerHTML=`\n            <div class="text">${this.options.text}</div>\n            <div class="colorpicker_wrapper">\n                <div class="colorpicker_opacity_wrapper">\n                    <div class="text">Opacity</div>\n                    <input type="range" min="0" max="255" value="255" class="colorpicker_opacity">\n                </div>\n                <input type="color" value="#ffffff" class="colorpicker_color">\n                <div class="colorpicker_preview"></div>\n            </div>\n        `,s.classList.add("colorpicker"),this.opacitySlider=s.querySelector(".colorpicker_opacity"),this.colorPicker=s.querySelector(".colorpicker_color"),this.preview=s.querySelector(".colorpicker_preview"),this.options.bindVar?this.color=window.cheat.hud.syncedVars.get("cssVars").get(this.options.bindVar):this.options.color&&(this.color=this.options.color),this.opacitySlider.addEventListener("mousedown",(e=>{e.stopPropagation()})),null===(i=this.opacitySlider)||void 0===i||i.addEventListener("input",(()=>{this.updatePreview()})),null===(n=this.colorPicker)||void 0===n||n.addEventListener("input",(()=>{this.updatePreview()})),this.element=s,this.updatePreview()}updatePreview(){let e=this.colorPicker.value,t=parseInt(this.opacitySlider.value);this.preview.style.backgroundColor=e,this.preview.style.opacity=""+t/255,this.options.bindVar&&window.cheat.hud.updateCssVar(this.options.bindVar,this.color),this.dispatchEvent(new CustomEvent("change",{detail:this.color}))}set color(e){let[t,i]=function(e){let[t,i,n,s]=e.slice(5,-1).split(",").map((e=>parseFloat(e.trim())));return[`#${t.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`,s]}(e);this.colorPicker.value=t,this.opacitySlider.value=""+255*i,this.updatePreview()}get color(){let e=this.colorPicker.value,t=parseInt(this.opacitySlider.value);var i,n;return i=e,n=t/255,`rgba(${parseInt(i.slice(1,3),16)}, ${parseInt(i.slice(3,5),16)}, ${parseInt(i.slice(5,7),16)}, ${n})`}}class x{constructor(e){var t;this.capturing=!1,this.keys=new Set,this.actionState="start",this.options=e,this.keybindOpener=(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 40"><rect width="40" height="26" x="4" y="10" rx="2.038" ry="2.234" style="fill:#000;fill-opacity:1;fill-rule:evenodd;stroke:#fff;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"/><rect width="40" height="26" x="4" y="10" rx="2.038" ry="2.234" style="fill:#000;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"/><path d="M14 30h19M7 30h5M35 30h6M7 16h4M13 16h4M19 16h4M25 16h4M31 16h4M34 23h4M28 23h4M22 23h4M16 23h4M37 16h4M10 23h4" style="fill:none;fill-opacity:.75;fill-rule:evenodd;stroke:#fff;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/></svg>',"image/svg+xml").firstChild,this.keybindOpener.classList.add("keybind_opener"),this.keybindEditor=document.createElement("dialog"),this.keybindEditor.classList.add("keybind_editor_wrapper"),this.keybindEditor.innerHTML=`\n\t\t\t<div class="keybind_editor">\n\t\t\t\t<div class="close">x</div>\n\t\t\t\t<h1 class="keybind_title">${e.title}</h1>\n\t\t\t\t<div class="keybind_controls">\n\t\t\t\t\t<div class="keybind_display"></div>\n\t\t\t\t\t<div class="keybind_exclusive">\n\t\t\t\t\t\t<div class="text">Exclusive?</div>\n\t\t\t\t\t\t<input type="checkbox" class="exclusive" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="action">Start Capture</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;let i=null!==(t=e.exclusive)&&void 0!==t&&t,n=window.cheat.hud.syncedVars.get("keybinds").get(e.id);n?(this.keys=new Set(n.keys),i=n.exclusive):e.keys&&(this.keys=e.keys),i&&this.keybindEditor.querySelector(".exclusive").setAttribute("checked","true"),this.bind={keys:this.keys,exclusive:i,callback:e.callback},window.cheat.keybindManager.registerBind(this.bind),this.updateAction(),this.updateDisplay(),this.addEventListeners()}addEventListeners(){let e=this.keybindEditor.querySelector(".action"),t=this.keybindEditor.querySelector(".close"),i=this.keybindEditor.querySelector(".keybind_display"),n=this.keybindEditor.querySelector(".exclusive");this.keybindOpener.addEventListener("click",(()=>{this.keybindEditor.showModal()})),this.keybindEditor.addEventListener("mousedown",(t=>{t.stopPropagation(),this.capturing&&t.target!=e&&this.endCapture()})),i.addEventListener("mousedown",(e=>{e.stopPropagation(),this.beginCapture()})),t.addEventListener("click",(()=>{this.keybindEditor.close()})),e.addEventListener("click",(()=>{"Start Capture"==this.actionState?this.beginCapture():"End Capture"==this.actionState?this.endCapture():"Reset"==this.actionState&&(this.keys.clear(),this.updateDisplay(),this.updateAction())})),n.addEventListener("change",(()=>{this.bind.exclusive=n.checked,this.syncBind()}))}beginCapture(){this.capturing=!0,this.keys.clear(),this.keybindEditor.querySelector(".keybind_display").innerHTML="Press any key...",document.addEventListener("keydown",this.keybindCapture.bind(this)),this.updateAction()}keybindCapture(e){this.capturing&&(e.preventDefault(),"Escape"!==e.key&&"Enter"!==e.key?(this.keys.add(e.key.toLowerCase()),this.updateDisplay()):this.endCapture())}endCapture(){this.capturing=!1,document.removeEventListener("keydown",this.keybindCapture.bind(this)),this.updateAction(),this.syncBind()}updateDisplay(){let e=this.keybindEditor.querySelector(".keybind_display"),t=Array.from(this.keys);t=t.map((e=>" "===e?"space":e)),e.innerHTML=t.join(" + ")}updateAction(){let e=this.keybindEditor.querySelector(".action");this.capturing?this.actionState="End Capture":0==this.keys.size?this.actionState="Start Capture":this.actionState="Reset",e.innerHTML=this.actionState}attachTo(e){e.appendChild(this.keybindOpener),e.appendChild(this.keybindEditor)}syncBind(){this.options.id&&window.cheat.hud.updateKeybind(this.options.id,{keys:Array.from(this.keys),exclusive:this.bind.exclusive})}}class S extends b{constructor(e,t){var i,n;super(e,t);let s=document.createElement("div");if(s.classList.add("button_wrapper"),s.innerHTML=`\n            <button class="button">${this.options.text}</button>\n        `,this.element=s,this.button=s.querySelector("button"),this.button.addEventListener("click",(()=>{var e;this.dispatchEvent(new CustomEvent("click")),this.options.runFunction&&(null===(e=window.cheat.funcs.get(this.options.runFunction))||void 0===e||e.call(this))})),this.options.keybind){new x({title:null!==(i=t.title)&&void 0!==i?i:`Set keybind for ${this.button.innerText}`,keys:null!==(n=t.defaultKeybind)&&void 0!==n?n:new Set,exclusive:!1,callback:()=>{this.dispatchEvent(new CustomEvent("click"))}}).attachTo(s)}}set text(e){this.button.innerText=e}get text(){return this.button.innerText}}class E extends b{constructor(e,t){var i;super(e,t),this.input=null;let n=document.createElement("div");n.innerHTML=`\n            <div class="text">${this.options.text}</div>\n            <input type="text" class="textinput" placeholder="${null!==(i=this.options.placeholder)&&void 0!==i?i:""}">\n        `,n.classList.add("textinput_wrapper"),this.element=n,this.input=n.querySelector("input"),this.input.addEventListener("input",(()=>{this.dispatchEvent(new CustomEvent("input",{detail:this.text}))}))}set text(e){this.input.value=e}get text(){return this.input.value}}class M extends b{constructor(e,t){var i,n,s;super(e,t);let r=document.createElement("div");if(r.innerHTML='\n\t\t\t<button class="toggle"></button>\n\t\t',r.classList.add("toggle_wrapper"),t.keybind){let e={title:null!==(i=t.title)&&void 0!==i?i:"Set keybind for toggle",keys:null!==(n=t.defaultKeybind)&&void 0!==n?n:new Set,exclusive:!1,callback:()=>{this.toggle()}};t.keybindId&&(e.id=t.keybindId),new x(e).attachTo(r)}this.enabled=null!==(s=this.options.default)&&void 0!==s&&s,this.element=r,this.button=r.querySelector("button"),this._textEnabled=this.options.textEnabled,this._textDisabled=this.options.textDisabled,this.updateButton(),this.button.addEventListener("keydown",(e=>e.preventDefault())),this.button.addEventListener("click",(()=>{this.toggle()}))}updateButton(){this.button.innerHTML=this.enabled?this._textEnabled:this._textDisabled,this.button.classList.toggle("enabled",this.enabled)}toggle(){this.enabled=!this.enabled,this.updateButton(),this.options.runFunction&&window.cheat.funcs.get(this.options.runFunction)(this.enabled),this.dispatchEvent(new CustomEvent("change",{detail:this.enabled}))}get value(){var e;return null!==(e=this.enabled)&&void 0!==e&&e}set value(e){this.enabled=e,this.updateButton()}get textEnabled(){return this._textEnabled}set textEnabled(e){this._textEnabled=e,this.updateButton()}get textDisabled(){return this._textDisabled}set textDisabled(e){this._textDisabled=e,this.updateButton()}}class C extends b{constructor(e,t){super(e,t),this.element=document.createElement("div"),this.element.classList.add("dropdown_wrapper"),this.element.innerHTML=`\n\t\t\t<div class="text">${t.text}</div>\n\t\t\t<select class="dropdown">\n\t\t\t\t${t.options.map((e=>`<option value="${e}" ${e===t.default?"selected":""}>\n\t\t\t\t\t\t${e}\n\t\t\t\t\t</option>`)).join("")}\n\t\t\t</select>\n\t\t`,this.select=this.element.querySelector(".dropdown"),this.select.addEventListener("keydown",(e=>e.preventDefault())),this.select.addEventListener("change",(()=>{t.runFunction&&window.cheat.funcs.get(this.options.runFunction)(this.select.value),this.dispatchEvent(new CustomEvent("change",{detail:this.select.value}))}))}addOption(e){let t=document.createElement("option");t.value=e,t.innerText=e,this.select.appendChild(t)}removeOption(e){let t=this.select.querySelector(`option[value="${e}"]`);t&&this.select.removeChild(t),this.select.value===e&&(this.select.value=this.select.options[0].value)}setOptions(e){this.select.innerHTML="",e.forEach((e=>{this.addOption(e)}))}get value(){return this.select.value}set value(e){this.select.value=e}}class T extends b{constructor(e,t){var i;super(e,t);let n=document.createElement("div");n.classList.add("slider_wrapper"),n.innerHTML=`\n\t\t\t<div class = "text">${t.text}</div>\n\t\t\t<input type = "range" min = "${t.min}" max = "${t.max}" value = "${null!==(i=t.default)&&void 0!==i?i:0}" class = "slider">\n\t\t`,this.slider=n.querySelector(".slider"),this.element=n,this.slider.addEventListener("mousedown",(e=>{e.stopPropagation()})),this.slider.addEventListener("input",(()=>{this.options.runFunction&&window.cheat.funcs.get(this.options.runFunction)(this.slider.value),this.dispatchEvent(new CustomEvent("change",{detail:this.slider.value}))}))}set value(e){this.slider.value=e.toString()}get value(){return Number(this.slider.value)}}class L{constructor(e,t,i,n=!1){this.name="",this.hideTimeout=null,this.element=null,this.isRoot=!1,this.groups=[],this.parentGroup=null,this.elements=[],this.menu=null,this.menu=e,this.parentGroup=t,this.name=i,this.isRoot=n,this.init()}init(){var e,t;let i=document.createElement("div");i.classList.add("group"),this.isRoot||(i.style.display="none"),this.element=i,null===(t=null===(e=this.menu)||void 0===e?void 0:e.element)||void 0===t||t.appendChild(i),this.isRoot||this.addElement("groupopener",{text:"Back",openGroup:this.parentGroup.name,direction:"right"})}addElement(e,t){var i;let n;switch(e.toLowerCase()){case"text":n=new w(this,t);break;case"groupopener":n=new k(this,t);break;case"colorpicker":n=new _(this,t);break;case"button":n=new S(this,t);break;case"textinput":n=new E(this,t);break;case"toggle":n=new M(this,t);break;case"dropdown":n=new C(this,t);break;case"slider":n=new T(this,t);break;default:console.error(`Unknown element type: ${e}`)}return n?(null===(i=this.element)||void 0===i||i.appendChild(n.element),n):null}slide(e,t){this.hideTimeout&&clearTimeout(this.hideTimeout),this.element.style.animation=`slide_${e}_${t} both 0.5s`,"in"==e?this.element.style.display="flex":"out"==e&&(this.hideTimeout=setTimeout((()=>this.element.style.display="none"),500))}createGroup(e){let t=this.menu.getAnyGroup(e);if(t)return t;let i=new L(this.menu,this,e);return this.groups.push(i),this.menu.groups.push(i),this.addElement("groupopener",{text:e,openGroup:e,direction:"left"}),i}group(e){for(let t=0;t<this.groups.length;t++)if(this.groups[t].name==e)return this.groups[t];return null}remove(){var e,t;null===(e=this.element)||void 0===e||e.remove(),null===(t=this.parentGroup)||void 0===t||t.groups.splice(this.parentGroup.groups.indexOf(this),1),this.menu.groups.splice(this.menu.groups.indexOf(this),1)}loadFromObject(e){const t=()=>{if(e.groups)for(let t of e.groups){this.createGroup(t.name).loadFromObject(t)}},i=()=>{if(e.elements)for(let t of e.elements)this.addElement(t.type,t.options)};"elementsFirst"==e.order?(i(),t()):(t(),i())}}class A{constructor(e){this.menu=null,this.element=null,this.menu=e,this.init()}init(){var e,t;let i=document.createElement("div");i.classList.add("menu_controls"),i.innerHTML=this.menu.name;let n=document.createElement("div");n.classList.add("menu_minimizer"),this.element=i,this.element.appendChild(n),null===(t=null===(e=this.menu)||void 0===e?void 0:e.element)||void 0===t||t.appendChild(i),this.updateMinimizer(),n.addEventListener("click",(()=>{var e;null===(e=this.menu)||void 0===e||e.minimize(),this.updateMinimizer()}))}updateMinimizer(){var e;if(!this.element)return;let t=this.element.querySelector(".menu_minimizer");t&&(t.innerHTML=(null===(e=this.menu)||void 0===e?void 0:e.minimized)?"+":"-")}}class I{constructor(e,t,i){this.hud=null,this.element=null,this.rootGroup=null,this.name="",this.groups=[],this.minimized=!1,this.transform={top:0,left:0,width:300,height:200,minimized:!1},this.hud=e,this.name=t,i&&(this.transform=i),this.init()}applyTransform(e){var t;this.element&&(e.height<50&&(e.height=50),e.width<50&&(e.width=50),this.element.style.top=`${e.top}px`,this.element.style.left=`${e.left}px`,this.element.style.width=`${e.width}px`,this.element.style.height=`${e.height}px`,this.minimize(null!==(t=e.minimized)&&void 0!==t&&t))}init(){var e;let t=document.createElement("div");t.classList.add("menu"),this.element=t,null===(e=this.hud)||void 0===e||e.element.appendChild(t),this.applyTransform(this.transform),new A(this);let i=new L(this,null,"root",!0);this.rootGroup=i,this.groups.push(i),i.element&&this.element.appendChild(i.element),this.addListeners()}addListeners(){if(!this.element)return;let e=!1,t={x:0,y:0},i=0;this.element.addEventListener("mousedown",(n=>{e=!0,t.x=n.clientX,t.y=n.clientY,i=0})),window.addEventListener("mouseup",(()=>{e=!1})),new ResizeObserver((t=>{0!=t[0].contentRect.width&&0!=t[0].contentRect.height&&(e=!1,this.transform.width=t[0].contentRect.width,this.minimized||(this.transform.height=t[0].contentRect.height),this.syncTransform())})).observe(this.element),window.addEventListener("mousemove",(n=>{if(!e)return;if(i+=Math.abs(n.clientX-t.x)+Math.abs(n.clientY-t.y),i<10)return;let s=n.clientX-t.x,r=n.clientY-t.y;this.element.style.left=`${this.element.offsetLeft+s}px`,this.element.style.top=`${this.element.offsetTop+r}px`,this.transform.top=this.element.offsetTop,this.transform.left=this.element.offsetLeft,this.syncTransform(),this.element.offsetLeft<0&&(this.element.style.left="0px"),this.element.offsetTop<0&&(this.element.style.top="0px"),this.element.offsetLeft+this.element.offsetWidth>window.innerWidth&&(this.element.style.left=window.innerWidth-this.element.offsetWidth+"px"),this.element.offsetTop+this.element.offsetHeight>window.innerHeight&&(this.element.style.top=window.innerHeight-this.element.offsetHeight+"px"),t.x=n.clientX,t.y=n.clientY}))}syncTransform(){this.hud.updateMenuTransform(this.name,this.transform)}createGroup(e){return this.rootGroup.createGroup(e)}group(e){return this.rootGroup.group(e)}addElement(e,t){return this.rootGroup.addElement(e,t)}getAnyGroup(e){for(let t of this.groups)if(t.name==e)return t;return null}remove(){var e;null===(e=this.element)||void 0===e||e.remove(),this.hud.menus.splice(this.hud.menus.indexOf(this),1)}minimize(e=null){this.minimized=null==e?!this.minimized:e,this.element.classList.toggle("minimized",this.minimized),this.transform.minimized=this.minimized,this.syncTransform()}loadFromObject(e){this.rootGroup.loadFromObject(e)}}const U=new Map([["menu-bg-color","rgba(0, 0, 0, 0.5)"],["menu-border-color","rgba(0, 0, 0, 0)"],["text-color","rgba(255, 255, 255, 1)"],["button-bg-color","rgba(0, 0, 0, 0.5)"],["button-border-color","rgba(255, 255, 255, 1)"],["menu-controls-bg-color","rgba(0, 0, 255, 0.5)"],["menu-controls-text-color","rgba(255, 255, 255, 1)"],["textinput-border-color","rgba(255, 255, 255, 1)"],["textinput-bg-color","rgba(0, 0, 0, 0.5)"],["toggle-bg-color","rgba(0, 0, 0, 0.5)"],["toggle-border-color","rgba(255, 255, 255, 1)"],["dropdown-bg-color","rgba(0, 0, 0, 0.5)"],["dropdown-border-color","rgba(255, 255, 255, 1)"],["keybind-editor-bg-color","rgba(0, 0, 0, 0.75)"],["keybind-editor-border-color","rgba(255, 255, 255, 1)"]]),P=new Map([["HUD Customization",{top:10,left:10,width:Math.min(window.innerWidth/4,350),height:window.innerHeight/2,minimized:!1}],["Devtools",{top:window.innerHeight/2+10,left:10,width:Math.min(window.innerWidth/4,350),height:window.innerHeight/2,minimized:!0}],["General Cheats",{top:10,left:window.innerWidth/3+20,width:Math.min(window.innerWidth/4,350),height:window.innerHeight/2,minimized:!1}],["Cheats for gamemodes",{top:10,left:window.innerWidth/3*2+30,width:Math.min(window.innerWidth/4,350),height:window.innerHeight/2,minimized:!1}]]),B=new Map([]),D={menus:[{name:"HUD Customization",groups:[{name:"General",order:"elementsFirst",elements:[{type:"colorpicker",options:{text:"Text Color",bindVar:"text-color"}}],groups:[{name:"Menu Appearance",elements:[{type:"colorpicker",options:{text:"Menu Background Color",bindVar:"menu-bg-color"}},{type:"colorpicker",options:{text:"Menu Border Color",bindVar:"menu-border-color"}}]},{name:"Menu Controls Appearance",elements:[{type:"colorpicker",options:{text:"Menu Controls Background Color",bindVar:"menu-controls-bg-color"}},{type:"colorpicker",options:{text:"Menu Controls Text Color",bindVar:"menu-controls-text-color"}}]},{name:"Keybind Editor Appearance",elements:[{type:"colorpicker",options:{text:"Keybind Editor Background Color",bindVar:"keybind-editor-bg-color"}},{type:"colorpicker",options:{text:"Keybind Editor Border Color",bindVar:"keybind-editor-border-color"}}]}]},{name:"Elements",groups:[{name:"Buttons",elements:[{type:"colorpicker",options:{text:"Button Background Color",bindVar:"button-bg-color"}},{type:"colorpicker",options:{text:"Button Border Color",bindVar:"button-border-color"}}]},{name:"Text Inputs",elements:[{type:"colorpicker",options:{text:"Text Input Background Color",bindVar:"textinput-bg-color"}},{type:"colorpicker",options:{text:"Text Input Border Color",bindVar:"textinput-border-color"}}]},{name:"Toggles",elements:[{type:"colorpicker",options:{text:"Toggle Background Color",bindVar:"toggle-bg-color"}},{type:"colorpicker",options:{text:"Toggle Border Color",bindVar:"toggle-border-color"}}]},{name:"Dropdowns",elements:[{type:"colorpicker",options:{text:"Dropdown Background Color",bindVar:"dropdown-bg-color"}},{type:"colorpicker",options:{text:"Dropdown Border Color",bindVar:"dropdown-border-color"}}]}]}],elements:[{type:"button",options:{text:"Reset settings",runFunction:"resetSettings"}}]}]};class V{constructor(){this.canvas=document.createElement("canvas"),this.canvas.classList.add("gc_overlay_canvas"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,window.addEventListener("resize",(()=>{this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}))}get context(){return this.canvas.getContext("2d")}}class O{constructor(e){this.element=null,this.menus=[],this.cssVarsSheet=null,window.cheat.hud=this,this.syncedVars=new Map,this.cheat=e,this.cheat.funcs.set("resetSettings",this.resetSettings.bind(this)),this.loadSyncedVar("cssVars",U),this.loadSyncedVar("menuTransforms",P),this.loadSyncedVar("keybinds",B),this.updateCssVars(),this.init(),this.loadFromObject(D),this.addToggle()}resetSettings(){confirm("Setting updates will only take place after you reload the page, are you sure you want to reset settings?")&&(GM_deleteValue("cssVars"),GM_deleteValue("menuTransforms"),GM_deleteValue("keybinds"))}addToggle(){this.cheat.keybindManager.registerBind({keys:new Set(["\\"]),exclusive:!1,callback:()=>{this.element&&(this.element.style.display="none"==this.element.style.display?"":"none")}})}createMenu(e){var t;let i=this.menu(e);if(i)return i;let n=null===(t=this.syncedVars.get("menuTransforms"))||void 0===t?void 0:t.get(e),s=new I(this,e,n);return this.menus.push(s),s}menu(e){for(let t=0;t<this.menus.length;t++)if(this.menus[t].name==e)return this.menus[t];return null}loadSyncedVar(e,t){let i=GM_getValue(e,"{}"),n=JSON.parse(i);for(let[e,i]of t)n[e]||(n[e]=i);this.syncedVars.set(e,new Map(Object.entries(n)))}updateCssVar(e,t){var i,n;null===(i=this.syncedVars.get("cssVars"))||void 0===i||i.set(e,t),this.updateCssVars();let s=JSON.stringify(Object.fromEntries(null!==(n=this.syncedVars.get("cssVars"))&&void 0!==n?n:[]));GM_setValue("cssVars",s)}updateMenuTransform(e,t){var i,n;null===(i=this.syncedVars.get("menuTransforms"))||void 0===i||i.set(e,t);let s=JSON.stringify(Object.fromEntries(null!==(n=this.syncedVars.get("menuTransforms"))&&void 0!==n?n:[]));GM_setValue("menuTransforms",s)}updateKeybind(e,t){var i,n;console.log(e,t),null===(i=this.syncedVars.get("keybinds"))||void 0===i||i.set(e,t);let s=JSON.stringify(Object.fromEntries(null!==(n=this.syncedVars.get("keybinds"))&&void 0!==n?n:[]));GM_setValue("keybinds",s)}updateCssVars(){var e;this.cssVarsSheet||(this.cssVarsSheet=new CSSStyleSheet,document.adoptedStyleSheets=[...document.adoptedStyleSheets,this.cssVarsSheet]);let t=":root {\n";for(let[i,n]of null!==(e=this.syncedVars.get("cssVars"))&&void 0!==e?e:[])t+=`\t--${i}: ${n};\n`;t+="}",this.cssVarsSheet.replaceSync(t)}init(){let e=new CSSStyleSheet;e.replaceSync("#gc_hud {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 999999999999;\r\n    pointer-events: none;\r\n    color: var(--text-color);\r\n}\r\n\r\n#gc_hud .menu_controls {\r\n    width: 100%;\r\n    height: 20px;\r\n    background-color: var(--menu-controls-bg-color);\r\n    color: var(--menu-controls-text-color);\r\n    border-radius: 5px 5px 0px 0px;\r\n    text-align: center;\r\n    position: relative;\r\n}\r\n\r\n#gc_hud .menu_minimizer {\r\n    margin-left: 20px;\r\n    margin-right: 20px;\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    user-select: none;\r\n}\r\n\r\n#gc_hud .menu {\r\n    pointer-events: auto;\r\n    position: absolute;\r\n    background-color: var(--menu-bg-color);\r\n    display: inline-block;\r\n    border-radius: 5px;\r\n    overflow-x: hidden;\r\n    overflow-y: hidden;\r\n    resize: both;\r\n    width: 300px;\r\n    height: 200px;\r\n    outline: 3px solid var(--menu-border-color);\r\n}\r\n\r\n#gc_hud .menu.minimized {\r\n    height: 20px !important;\r\n    overflow-y: hidden;\r\n    resize: horizontal;\r\n}\r\n\r\n#gc_hud .group {\r\n    margin: 0px;\r\n    padding: 0px;\r\n    width: 100%;\r\n    /* allocate some space at the top and bottom */\r\n    height: calc(100% - 40px); \r\n    position: absolute;\r\n    top: 20px;\r\n    left: 0;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n}\r\n\r\n#gc_hud .button, #gc_hud .group_opener {\r\n    background-color: var(--button-bg-color);\r\n    border: 1px solid var(--button-border-color);\r\n}\r\n\r\n#gc_hud .toggle {\r\n    background-color: var(--toggle-bg-color);\r\n    border: 1px solid var(--toggle-border-color);\r\n}\r\n\r\n#gc_hud .button, #gc_hud .toggle, #gc_hud .group_opener {\r\n    border-radius: 5px;\r\n    padding: 5px;\r\n    margin: 5px;\r\n    cursor: pointer;\r\n    width: 90%;\r\n    transition: transform 0.2s ease-in-out;\r\n}\r\n\r\n/* make it bounce smaller when clicked */\r\n#gc_hud .button:active, #gc_hud .toggle:active, #gc_hud .group_opener:active {\r\n    transform: scale(0.93);\r\n}\r\n\r\n#gc_hud .colorpicker {\r\n    width: 100%;\r\n}\r\n\r\n#gc_hud .colorpicker_wrapper {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    margin: 5px;\r\n}\r\n\r\n#gc_hud .colorpicker_opacity_wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n}\r\n\r\n#gc_hud .colorpicker_preview {\r\n    width: 50px;\r\n    height: 50px;\r\n    border-radius: 5px;\r\n    opacity: 1;\r\n}\r\n\r\n#gc_hud .text {\r\n    text-align: center;\r\n    width: 100%;\r\n}\r\n\r\n#gc_hud .textinput_wrapper, #gc_hud .dropdown_wrapper, #gc_hud .slider_wrapper {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n}\r\n\r\n#gc_hud .textinput {\r\n    width: 90%;\r\n    border-radius: 5px;\r\n    border: 1px solid var(--textinput-border-color);\r\n    background-color: var(--textinput-bg-color);\r\n    color: var(--text-color);\r\n    padding: 5px;\r\n    margin: 5px;\r\n}\r\n\r\n#gc_hud .dropdown {\r\n    width: 90%;\r\n    border-radius: 5px;\r\n    border: 1px solid var(--dropdown-border-color);\r\n    background-color: var(--dropdown-bg-color);\r\n    color: var(--text-color);\r\n    padding: 5px;\r\n    margin: 5px;\r\n}\r\n\r\n#gc_hud .toggle_wrapper, #gc_hud .button_wrapper {\r\n    width: 90%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    padding: 0px;\r\n}\r\n\r\n#gc_hud .toggle, #gc_hud .button {\r\n    /* make it take up as much space as possible */\r\n    width: 100%;\r\n    margin: 0px;\r\n}\r\n\r\n#gc_hud .keybind_opener {\r\n    width: 30px;\r\n    height: 30px;\r\n    font-size: 30px;\r\n    margin-left: 10px;\r\n}\r\n\r\n#gc_hud .keybind_editor_wrapper {\r\n    background-color: var(--keybind-editor-bg-color);\r\n    border: 3px solid var(--keybind-editor-border-color);\r\n    border-radius: 8px;\r\n}\r\n\r\n#gc_hud .keybind_editor {\r\n    width: 50vw;\r\n    height: 50vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    color: var(--text-color);\r\n}\r\n\r\n#gc_hud .close {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    width: 20px;\r\n    height: 20px;\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n    user-select: none;\r\n}\r\n\r\n#gc_hud .keybind_title {\r\n    font-size: 40px;\r\n    text-align: center;\r\n}\r\n\r\n#gc_hud .keybind_controls {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n}\r\n\r\n#gc_hud .keybind_display {\r\n    border: 3px solid white;\r\n    min-width: 300px;\r\n    border-radius: 5px;\r\n    height: 50px;\r\n    text-align: center;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n}\r\n\r\n#gc_hud .keybind_exclusive {\r\n    display: flex;\r\n}\r\n\r\n#gc_hud .keybind_exclusive .text {\r\n    margin-right: 10px;\r\n}\r\n\r\n#gc_hud .keybind_editor .action {\r\n    cursor: pointer;\r\n}\r\n\r\n#gc_hud .slider {\r\n    width: 90%;\r\n    margin: 5px;\r\n}\r\n\r\n.gc_overlay_canvas {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    z-index: 9999;\r\n    pointer-events: none;\r\n}\r\n\r\n@keyframes slide_out_left {\r\n    0% {\r\n        transform: translateX(0);\r\n        opacity: 1;\r\n        pointer-events: all;\r\n    }\r\n\r\n    100% {\r\n        transform: translateX(-100%);\r\n        opacity: 0;\r\n        pointer-events: none;\r\n    }\r\n}\r\n\r\n@keyframes slide_out_right {\r\n    0% {\r\n        transform: translateX(0);\r\n        opacity: 1;\r\n        pointer-events: all;\r\n    }\r\n\r\n    100% {\r\n        transform: translateX(100%);\r\n        opacity: 0;\r\n        pointer-events: none;\r\n    }\r\n}\r\n\r\n@keyframes slide_in_left {\r\n    0% {\r\n        transform: translateX(-100%);\r\n        opacity: 0;\r\n        pointer-events: none;\r\n    }\r\n\r\n    100% {\r\n        transform: translateX(0);\r\n        opacity: 1;\r\n        pointer-events: all;\r\n    }\r\n}\r\n\r\n@keyframes slide_in_right {\r\n    0% {\r\n        transform: translateX(100%);\r\n        opacity: 0;\r\n        pointer-events: none;\r\n    }\r\n\r\n    100% {\r\n        transform: translateX(0);\r\n        opacity: 1;\r\n        pointer-events: all;\r\n    }\r\n}\r\n\r\n@keyframes idle {}"),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e];let t=document.createElement("div");t.id="gc_hud",this.element=t,document.addEventListener("DOMContentLoaded",(()=>{document.body.appendChild(t)})),this.updateCssVars()}loadFromObject(e){for(let t of e.menus){this.createMenu(t.name).loadFromObject(t)}}createOverlayCanvas(){var e;let t=new V;return null===(e=document.body)||void 0===e||e.appendChild(t.canvas),t}}class G{constructor(e){this.devices=[],this.cheat=e,this.cheat.socketHandler.addEventListener("recieveMessage",(e=>{var t;(null===(t=e.detail)||void 0===t?void 0:t.devices)&&this.updateDevices(e.detail.devices)}))}updateDevices(e){let t=e.addedDevices.devices.map((t=>{let i={};for(let n of t[6]){let t=e.addedDevices.values[n[0]],s=e.addedDevices.values[n[1]];i[t]=s}return{id:t[0],data:i}}));if(this.devices)for(let e of t){let t=this.devices.findIndex((t=>t.id==e.id));-1!=t?this.devices[t]=e:this.devices.push(e)}else this.devices=t}getDevices(e){if(e.id)return this.devices.filter((t=>t.id==e.id));let t=this.devices;for(let i in e)t=t.filter((t=>t.data[i]==e[i]));return t}getDevice(e){return this.getDevices(e)[0]}}const F={menus:[{name:"Devtools",elements:[{type:"toggle",options:{textEnabled:"Stop logging incoming messages",textDisabled:"Log incoming messages",default:!1,runFunction:"logIncomingMessages"}}]}]};class z{constructor(){this.name="Gimkit Cheat Devtools",this.hudAddition=F,this.loggingIncomingMessages=!1,this.funcs=new Map([["logIncomingMessages",e=>{this.loggingIncomingMessages=e}]])}init(e){e.socketHandler.addEventListener("recieveMessage",(t=>{this.loggingIncomingMessages&&e.log("Incoming message",t.detail)}))}}const H={menus:[{name:"General Cheats",elements:[{type:"toggle",options:{textEnabled:"Stop auto answering",textDisabled:"Auto answer",default:!1,runFunction:"setAutoAnswer",keybind:!0,keybindId:"autoAnswer"}}]}]};class W{constructor(){this.name="Autoanswer",this.hudAddition=H,this.autoAnswering=!1,this.funcs=new Map([["setAutoAnswer",e=>{this.autoAnswering=e}]]),this.currentQuestionId="",this.answerDeviceId="",this.questions=[],this.questionIdList=[],this.currentQuestionIndex=0}init(e){e.socketHandler.addEventListener("recieveMessage",(t=>{var i,n;if("colyseus"==e.socketHandler.transportType){if(!(null===(i=t.detail)||void 0===i?void 0:i.changes))return;let e=function(e){let t=[];for(let i of e.changes){let n={},s=i[1].map((t=>e.values[t]));for(let e=0;e<s.length;e++)n[s[e]]=i[2][e];t.push({id:i[0],data:n})}return t}(t.detail);for(let t of e){for(let[e,i]of Object.entries(t.data))"GLOBAL_questions"==e&&(this.questions=JSON.parse(i),this.answerDeviceId=t.id);for(let[e,i]of Object.entries(t.data))e.includes("currentQuestionId")&&(this.currentQuestionId=i)}}else{if("STATE_UPDATE"!=(null===(n=t.detail)||void 0===n?void 0:n.key))return;switch(t.detail.data.type){case"GAME_QUESTIONS":this.questions=t.detail.data.value;break;case"PLAYER_QUESTION_LIST":this.questionIdList=t.detail.data.value.questionList,this.currentQuestionIndex=t.detail.data.value.questionIndex;break;case"PLAYER_QUESTION_LIST_INDEX":this.currentQuestionIndex=t.detail.data.value}}})),setInterval((()=>{var t;if(this.autoAnswering)if("colyseus"==e.socketHandler.transportType){if(""==this.currentQuestionId)return;let i=null===(t=this.questions)||void 0===t?void 0:t.find((e=>e._id==this.currentQuestionId));if(!i)return;let n=i.answers.find((e=>e.correct))._id,s={key:"answered",deviceId:this.answerDeviceId,data:{answer:n}};e.socketHandler.sendData("MESSAGE_FOR_DEVICE",s)}else{let t=this.questionIdList[this.currentQuestionIndex],i=this.questions.find((e=>e._id==t)).answers.find((e=>e.correct))._id;e.socketHandler.sendData("QUESTION_ANSWERED",{answer:i,questionId:t})}}),1e3)}}let j=["Unchanged","default_browngreen","default_cyan","default_darkblue","default_darkgreen","default_darkpurple","default_gray","default_grayblue","default_graybrown","default_hotpink","default_lightbrown","default_lightgreen","default_lightpink","default_lightpurple","default_lightyellow","default_lime","default_maroon","default_orange","default_pink","default_red","default_yellow","sunny","glassHalfFull","stripeDoubleGreen","sprinklesRed","dayOne","vortexAgent","echoAgent","grayGradient","mustache","clown","redNinja","redDeliciousApple","polkaDotBlueAndYellow","fadedBlueGradient","whiteAndBlueVerticalStripes","volcanoCracks","pinkPaste","yellowCracksPurple","glyphsYellowBrown","camoBlue","glyphsOrangeBlue","purplePaste","mustacheBrown","mustachePink","polkaDotWhiteAndRed","camoTan","camoGreen","stripeDoublePurple","stripeDoubleRed","stripeDoubleYellow","sprinklesChocolate","coolRedBlueGradient","mountainAndSun","redDinoCostume","pencilPack","corn","luchador","fox","burger","galaxy","cellBlue","cellGold","rockyWest","puzzleRedGreen","puzzleOrangeBlue","puzzleGrayWhite","puzzleGreenBlue","puzzleYellowPurple","pumpkin","ghostCostume","mummy","fifthBirthday","pumpkinPie","feast","frostBuddy","festiveOnesieTan","festiveOnesieRed","festiveOnesieGreen","festiveOnesieBlue","hotChocolate","snowglobe","polkaDotFestive","polkaDotFestiveReverse","mustacheSanta","firework","gift","snowman","detective","yinYang","astroHelmet","hamster","pirate","rockstar","circuitGray","circuitBlue","circuitGreen","roses","heart","zebra","constellationBlackWhite","constellationBlackGreen","constellationPurpleYellow","constellationPinkGreen","constellationYellowPink","squiggles","frozenMummy","leprechaun","evilPlantGreen","evilPlantPink","fisher","rainbowWave","sketch","sketchBlue","bananaSplit","eightBit","gamerGreen","gamerPink","gamerPurple","gamerYellow","graduate","graduateBlue","arcticFox"],R=["None","origin_token"];j=j.sort(),R=R.sort();const $={menus:[{name:"General Cheats",groups:[{name:"Cosmetic Picker",elements:[{type:"text",options:{text:"Select cosmetics to apply to your character. These changes are only visible to you."}},{type:"dropdown",options:{text:"Selected Skin",options:j,runFunction:"setSkin",default:"Unchanged"}},{type:"dropdown",options:{text:"Selected Trail",options:R,runFunction:"setTrail",default:"None"}}]}]}]};class q{constructor(){this.name="Cosmetic Picker",this.hudAddition=$,this.funcs=new Map([["setSkin",e=>{this.setSkin(e)}],["setTrail",e=>{this.setTrail(e)}]]),this.skinWaiting=!1,this.trailWaiting=!1}setSkin(e){var t,i,n,s,r,o;if("Unchanged"==e)return;if(!("stores"in unsafeWindow)){if(this.skinWaiting)return;let t=setInterval((()=>{"stores"in unsafeWindow&&(this.hasSkinApplied(e)&&clearInterval(t),this.setSkin(e))}),100);return void(this.skinWaiting=!0)}let a=unsafeWindow.stores.phaser,l=null===(t=a.mainCharacter)||void 0===t?void 0:t.id;if(!l)return;let h=`character_${e}`;null===(o=null===(r=null===(s=null===(n=null===(i=a.scene)||void 0===i?void 0:i.characterManager)||void 0===n?void 0:n.characters)||void 0===s?void 0:s.get(l))||void 0===r?void 0:r.skin)||void 0===o||o.updateSkin(h)}hasSkinApplied(e){var t,i,n,s,r;let o=unsafeWindow.stores.phaser,a=null===(t=o.mainCharacter)||void 0===t?void 0:t.id;if(!a)return;let l=`character_${e}`;return(null===(r=null===(s=null===(n=null===(i=o.scene)||void 0===i?void 0:i.characterManager)||void 0===n?void 0:n.characters)||void 0===s?void 0:s.get(a))||void 0===r?void 0:r.skin.skinId)==l}setTrail(e){var t,i,n,s,r,o;if(!("stores"in unsafeWindow)){if(this.trailWaiting)return;let t=setInterval((()=>{"stores"in unsafeWindow&&(this.hasSkinApplied(e)&&clearInterval(t),this.setTrail(e))}),100);return void(this.trailWaiting=!0)}let a=unsafeWindow.stores.phaser,l=null===(t=a.mainCharacter)||void 0===t?void 0:t.id;if(!l)return;"None"==e&&(e="");let h=`trail_${e}`;null===(o=null===(r=null===(s=null===(n=null===(i=a.scene)||void 0===i?void 0:i.characterManager)||void 0===n?void 0:n.characters)||void 0===s?void 0:s.get(l))||void 0===r?void 0:r.characterTrail)||void 0===o||o.updateAppearance(h)}}const N={menus:[{name:"General Cheats",groups:[{name:"Player Highlighter",elements:[{type:"toggle",options:{textEnabled:"Stop Highlighting Teammates",textDisabled:"Highlight Teammates",runFunction:"highlightTeammates",keybind:!0,keybindId:"highlightTeammates"}},{type:"toggle",options:{textEnabled:"Stop Highlighting Enemies",textDisabled:"Highlight Enemies",runFunction:"highlightEnemies",keybind:!0,keybindId:"highlightEnemies"}},{type:"slider",options:{text:"Arrow Distance",min:20,max:750,default:200,runFunction:"setArrowDistance"}}]}]}]};class Q{constructor(){this.name="Player Highlighter",this.hudAddition=N,this.funcs=new Map([["highlightTeammates",e=>{this.highlightingTeammates=e}],["highlightEnemies",e=>{this.highlightingEnemies=e}],["setArrowDistance",e=>{this.arrowDistance=e}]]),this.highlightingTeammates=!1,this.highlightingEnemies=!1,this.ctx=null,this.canvas=null,this.arrowDistance=200}init(e){setInterval((()=>{var t,i;(null===(i=null===(t=null===unsafeWindow||void 0===unsafeWindow?void 0:unsafeWindow.stores)||void 0===t?void 0:t.phaser)||void 0===i?void 0:i.scene)&&(null==this.canvas&&(this.canvas=e.hud.createOverlayCanvas(),this.ctx=this.canvas.context),this.render())}),100)}render(){var e,t,i,n,s,r,o,a,l,h,d;null===(e=this.ctx)||void 0===e||e.clearRect(0,0,null!==(i=null===(t=this.canvas)||void 0===t?void 0:t.canvas.width)&&void 0!==i?i:1920,null!==(s=null===(n=this.canvas)||void 0===n?void 0:n.canvas.height)&&void 0!==s?s:1080);let u=unsafeWindow.stores.phaser,c=u.scene.characterManager.characters,p=u.mainCharacter;for(let[e,t]of c){if(e==p.id)continue;let i=t.teamId!=p.teamId;if(i&&!this.highlightingEnemies)continue;if(!i&&!this.highlightingTeammates)continue;this.ctx.strokeStyle=i?"red":"green",this.ctx.lineWidth=5;let n=Math.atan2(t.body.y-p.body.y,t.body.x-p.body.x),s=Math.sqrt(Math.pow(t.body.x-p.body.x,2)+Math.pow(t.body.y-p.body.y,2)),u=Math.min(s,this.arrowDistance),c={x:Math.cos(n)*u+this.canvas.canvas.width/2,y:Math.sin(n)*u+this.canvas.canvas.height/2},f=n-Math.PI/4*3,g=n+Math.PI/4*3;null===(r=this.ctx)||void 0===r||r.beginPath(),null===(o=this.ctx)||void 0===o||o.moveTo(c.x,c.y),null===(a=this.ctx)||void 0===a||a.lineTo(50*Math.cos(f)+c.x,50*Math.sin(f)+c.y),null===(l=this.ctx)||void 0===l||l.moveTo(c.x,c.y),null===(h=this.ctx)||void 0===h||h.lineTo(50*Math.cos(g)+c.x,50*Math.sin(g)+c.y),null===(d=this.ctx)||void 0===d||d.stroke(),this.ctx.fillStyle="black",this.ctx.font="20px Verdana",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(`${t.nametag.name} (${Math.round(s)})`,c.x,c.y)}}}class Y{constructor(){this.name="Cosmetic Picker",this.freecamming=!1,this.freeCamPos={x:0,y:0},this.toggleFreecam=null,this.spectateMenu=null}init(e){let t=e.hud.createMenu("General Cheats").createGroup("Freecam"),i=t.addElement("toggle",{textEnabled:"Stop Freecamming",textDisabled:"Unbind Camera",keybind:!0,keybindId:"toggleFreecam"});i.addEventListener("change",(e=>{this.camHelper?this.enableFreecam(e.detail):i.value=!1}));let n=t.addElement("dropdown",{text:"Spectate Player",options:["None"]});n.addEventListener("change",(e=>{this.spectatePlayer(e.detail)})),this.toggleFreecam=i,this.spectateMenu=n;let s=setInterval((()=>{var e,t,i;(null===(i=null===(t=null===(e=null===unsafeWindow||void 0===unsafeWindow?void 0:unsafeWindow.stores)||void 0===e?void 0:e.phaser)||void 0===t?void 0:t.scene)||void 0===i?void 0:i.cameraHelper)&&(this.camHelper=unsafeWindow.stores.phaser.scene.cameraHelper,setInterval((()=>{this.update()}),1e3/60),clearInterval(s))}),100)}enableFreecam(e){let t=unsafeWindow.stores.phaser,i=t.scene.cameras.cameras[0];if(e)this.camHelper.stopFollow(),this.freeCamPos.x=i.midPoint.x,this.freeCamPos.y=i.midPoint.y;else{let e=t.scene.characterManager.characters.get(t.mainCharacter.id).body;this.camHelper.startFollowingObject({object:e})}this.freecamming=e}spectatePlayer(e){if("None"==e)return void this.enableFreecam(!1);this.toggleFreecam.value=!0;let t=unsafeWindow.stores.phaser.scene.characterManager.characters;for(let[i,n]of t)if(n.nametag.name==e){this.camHelper.startFollowingObject({object:n.body});break}}update(){if(this.updateSpectatablePlayers(),!this.freecamming)return;let e=window.cheat.keybindManager.keys;e.has("u")&&(this.freeCamPos.y-=20),e.has("h")&&(this.freeCamPos.x-=20),e.has("j")&&(this.freeCamPos.y+=20),e.has("k")&&(this.freeCamPos.x+=20),this.camHelper.goTo(this.freeCamPos)}updateSpectatablePlayers(){var e;let t=unsafeWindow.stores.phaser,i=t.scene.characterManager.characters,n=["None"];for(let[e,s]of i)e!=t.mainCharacter.id&&n.push(s.nametag.name);null===(e=this.spectateMenu)||void 0===e||e.setOptions(n)}}var X;!function(e){e.Insurance="insurance",e["Money Per Question"]="moneyPerQuestion",e.Multiplier="multiplier",e["Streak Bonus"]="streakBonus"}(X||(X={}));const J={menus:[{name:"Cheats for gamemodes",groups:[{name:"Classic",elements:[{type:"toggle",options:{textEnabled:"Stop Auto Purchasing",textDisabled:"Start Auto Purchasing",default:!1,runFunction:"setAutoPurchasingClassic",keybind:!0,keybindId:"autoPurchasingClassic"}}]}]}]};class K{constructor(){this.name="Classic Script",this.money=0,this.upgradeLevels={insurance:1,moneyPerQuestion:1,multiplier:1,streakBonus:1},this.hudAddition=J,this.autoPurchasing=!1,this.funcs=new Map([["setAutoPurchasingClassic",e=>{this.autoPurchasing=e,this.autoPurchasing&&this.checkAutoBuy()}]]),this.upgradesToGet=[["Streak Bonus",2,20],["Money Per Question",3,100],["Streak Bonus",3,200],["Multiplier",3,300],["Streak Bonus",4,2e3],["Multiplier",4,2e3],["Money Per Question",5,1e4],["Streak Bonus",5,2e4],["Multiplier",5,12e3],["Money Per Question",6,75e3],["Multiplier",6,85e3],["Streak Bonus",6,2e5],["Streak Bonus",7,2e6],["Streak Bonus",8,2e7],["Multiplier",7,7e5],["Money Per Question",9,1e7],["Multiplier",8,65e5],["Streak Bonus",9,2e8],["Multiplier",9,65e6],["Streak Bonus",10,2e9],["Money Per Question",10,1e8],["Multiplier",10,1e9]]}init(e){this.cheat=e,this.cheat.socketHandler.addEventListener("recieveMessage",(e=>{var t,i;if("blueboat"==this.cheat.socketHandler.transportType){if("UPGRADE_LEVELS"==(null===(t=e.detail.data)||void 0===t?void 0:t.type)){this.upgradeLevels=e.detail.data.value;for(let e=0;e<this.upgradesToGet.length;e++){let t=this.upgradesToGet[e];this.upgradeLevels[X[t[0]]]>=t[1]&&(this.upgradesToGet.splice(e,1),e--)}}"BALANCE"==(null===(i=e.detail.data)||void 0===i?void 0:i.type)&&(this.money=e.detail.data.value,this.checkAutoBuy())}}))}checkAutoBuy(){if(!this.autoPurchasing)return;let e=this.upgradesToGet[0];e&&this.money>=e[2]&&this.purchaseUpgrade(e[0],e[1])}purchaseUpgrade(e,t){this.cheat.log("Purchasing upgrade",e,t),this.cheat.socketHandler.sendData("UPGRADE_PURCHASED",{upgradeName:e,level:t})}}const Z={menus:[{name:"Cheats for gamemodes",groups:[{name:"Super Rich Mode",elements:[{type:"toggle",options:{textEnabled:"Stop Auto Purchasing",textDisabled:"Start Auto Purchasing",default:!1,runFunction:"setAutoPurchasingRichMode",keybind:!0,keybindId:"autoPurchasingRichMode"}}]}]}]};class ee extends K{constructor(){super(...arguments),this.name="Rich Mode Script",this.hudAddition=Z,this.funcs=new Map([["setAutoPurchasingRichMode",e=>{this.autoPurchasing=e,this.autoPurchasing&&this.checkAutoBuy()}]]),this.upgradesToGet=[["Streak Bonus",2,1e4],["Money Per Question",3,5e3],["Streak Bonus",3,1e5],["Multiplier",3,15e4],["Streak Bonus",4,1e6],["Multiplier",4,1e6],["Money Per Question",5,5e6],["Streak Bonus",5,1e7],["Multiplier",5,6e6],["Money Per Question",6,375e5],["Multiplier",6,425e5],["Streak Bonus",6,1e8],["Streak Bonus",7,1e9],["Streak Bonus",8,1e10],["Multiplier",7,35e7],["Money Per Question",9,5e9],["Multiplier",8,325e7],["Streak Bonus",9,1e11],["Multiplier",9,325e8],["Streak Bonus",10,1e12],["Money Per Question",10,5e10],["Multiplier",10,5e11]]}}class te extends EventTarget{constructor(){super(),this.keybindManager=new y,this.funcs=new Map,this.scripts=[],window.cheat=this,this.socketHandler=new v(this),this.deviceManager=new G(this),this.socketHandler.addEventListener("socket",(e=>{ie.log("Socket connected",e)})),this.socketHandler.getSocket(),this.hud=new O(this),this.scripts=[new z,new W,new q,new Q,new Y,new K,new ee],this.initScripts()}initScripts(){for(let e of this.scripts){if(e.funcs)for(let[t,i]of e.funcs)this.funcs.set(t,i);e.hudAddition&&this.hud.loadFromObject(e.hudAddition),e.init&&e.init(this)}}antifreeze(){let e=Object.freeze;Object.freeze=t=>{var i;return"WebSocket"==(null===(i=t.constructor)||void 0===i?void 0:i.name)||"WebSocket"==t.name?t:e(t)};var t=WebSocket.prototype.send;Object.defineProperty(WebSocket.prototype,"send",{configurable:!1,enumerable:!1,get:function(){return t},set:function(e){e!==t&&console.log("Attempted to modify WebSocket.prototype.send")}})}log(...e){console.log("[GC]",...e)}getScript(e){for(let t of this.scripts)if(t.name==e)return t;return null}}const ie=new te;ie.log("Loaded Gimkit Cheat version: 0.3.1"),ie.antifreeze(),Object.isFrozen(WebSocket)&&alert("WebSocket object is still frozen. Please try refreshing the page. If this persists, open an issue on GitHub.")}();
